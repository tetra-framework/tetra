{
  "version": 3,
  "sources": ["../../../js/tetra.core.js", "../../../js/tetra.js"],
  "sourcesContent": ["\nconst Tetra = {\n  init() {\n    Alpine.magic('static', () => Tetra.$static);\n    this.ws = new WebSocket(`ws://${window.location.host}/ws/tetra/`);\n\n  },\n\n  $static() {\n    return (path) => {\n      return window.__tetra_staticRoot+path;\n    }\n  },\n\n  alpineComponentMixins() {\n    return {\n      // Alpine.js lifecycle:\n      init() {\n        this.$dispatch('tetra:child-component-init', {component:  this});\n         // Set component ID attribute on DOM element for targeting\n        this.__initServerWatchers();\n        \n        // Connect to WebSocket if this is a reactive component\n        if (this.$root.hasAttribute('tetra-reactive')) {\n          this.__connectToWebSocket();\n        }\n        \n        if (this.__initInner) {\n          this.__initInner();\n        }\n        // if this component issues a before-request event, set .tetra-request to it\n        document.addEventListener(\"tetra:before-request\", (event) => {\n          // try to find any element with a \"tx-indicator\" attribute within this element\n          const css_selector = event.target.getAttribute('tx-indicator')\n          if(css_selector){\n            // if there is a tx-indicator pointing to an element, use that element as loading indicator\n            this.$el.querySelectorAll(css_selector).forEach(el => el.classList.add(\"tetra-request\"));\n          } else {\n            event.target.classList.add(\"tetra-request\");\n          }\n        })\n        document.addEventListener(\"tetra:after-request\", (event) => {\n          const css_selector = event.target.getAttribute('tx-indicator')\n          if(css_selector){\n            this.$el.querySelectorAll(css_selector).forEach(el => el.classList.remove(\"tetra-request\"));\n          } else {\n            event.target.classList.remove(\"tetra-request\");\n          }\n        })\n      },\n      destroy() {\n        this.$dispatch('tetra:child-component-destroy', {component:  this});\n        if (this.__destroyInner) {\n          this.__destroyInner();\n        }\n      },\n\n      // Tetra built ins:\n      _updateHtml(html) {\n        Alpine.morph(this.$root, html, {\n          updating(el, toEl, childrenOnly, skip) {\n            if (toEl.hasAttribute && toEl.hasAttribute('x-data-maintain') && el.hasAttribute && el.hasAttribute('x-data')) {\n              toEl.setAttribute('x-data', el.getAttribute('x-data'));\n              toEl.removeAttribute('x-data-maintain');\n            } else if (toEl.hasAttribute && toEl.hasAttribute('x-data-update') && el.hasAttribute && el.hasAttribute('x-data')) {\n              let data = Tetra.jsonDecode(toEl.getAttribute('x-data-update'));\n              let old_data = Tetra.jsonDecode(toEl.getAttribute('x-data-update-old'));\n              let comp = window.Alpine.$data(el);\n              for (const key in data) {\n                if (old_data.hasOwnProperty(key) && (old_data[key] !== comp[key])) {\n                  // If the data that was submitted to the server has since changed we don't overwrite it\n                  continue\n                }\n                comp[key] = data[key];\n              }\n              toEl.setAttribute('x-data', el.getAttribute('x-data'));\n              toEl.removeAttribute('x-data-update');\n            }\n          },\n          lookahead: true\n        });\n        this.$dispatch('tetra:component-updated', { component: this });\n      },\n      _updateData(data) {\n        for (const key in data) {\n          this[key] = data[key];\n        }\n        this.$dispatch('tetra:component-data-updated', { component: this });\n      },\n      _setValueByName(name, value){\n        // sets value to the input field with the given name\n        // This is especially useful for emptying a file field, as the browser doesn't do that on page refreshes.\n        let inputs = document.getElementsByName(name);\n        for (let i = 0; i < inputs.length; i++) {\n          inputs[i].value = value;\n        }\n      },\n      _removeComponent() {\n        this.$dispatch('tetra:component-before-remove', { component: this });\n        this.$root.remove();\n      },\n      _replaceComponent(html) {\n        this.$dispatch('tetra:component-before-remove', { component: this });\n        this.$root.insertAdjacentHTML('afterend', html);\n        this.$root.remove();\n        this.$dispatch('tetra:component-updated', { component: this });\n      },\n      _redirect(url) {\n        document.location = url;\n      },\n      _dispatch(name, data) {\n        this.$dispatch(name, {\n          _component: this,\n          ...data\n        });\n      },\n      _pushUrl(url, replace=false) {\n        if(replace){\n          window.history.replaceState(null, '', url);\n        } else {\n          window.history.pushState(null, '', url);\n        }\n      },\n      _updateSearchParam(param, value) {\n        const url = new URL(window.location);\n        if (value) {\n          url.searchParams.set(param, value);\n        } else {\n          url.searchParams.delete(param);\n        }\n        window.history.pushState(null, \"\", url.toString());\n      },\n      // Push notification methods\n      _subscribe(channelName, componentId = null, autoUpdate = true) {\n        return Tetra.sendWebSocketMessage({\n          type: 'subscribe',\n          channel: channelName,\n          component_id: componentId || this.component_id,\n          component_class: this.componentName,\n          auto_update: autoUpdate\n        });\n      },\n\n      _unsubscribe(channelName, componentId = null) {\n        return Tetra.sendWebSocketMessage({\n          type: 'unsubscribe',\n          channel: channelName,\n          component_id: componentId || this.component_id\n        });\n      },\n\n      _notifyChannel(channelName, eventName, data) {\n        return Tetra.sendWebSocketMessage({\n          type: 'notify_channel',\n          channel: channelName,\n          event_name: eventName,\n          data: data,\n          sender_id: this.component_id\n        });\n      },\n\n      // Tetra private:\n      __initServerWatchers() {\n        this.__serverMethods.forEach(item => {\n          if (item.watch) {\n            item.watch.forEach(propName => {\n              this.$watch(propName, async (value, oldValue) => {\n                await this[item.name](value, oldValue, propName);\n              })\n            })\n          }\n        })\n      },\n      __childComponents: {},\n      __rootBind: {\n        ['@tetra:child-component-init'](event) {\n          event.stopPropagation();\n          const comp = event.detail.component;\n          if (comp.key === this.key) {\n            return\n          }\n          if (comp.key) {\n            this.__childComponents[comp.key] = comp;\n          }\n          comp._parent = this;\n        },\n        ['@tetra:child-component-destroy'](event) {\n          event.stopPropagation();\n          const comp = event.detail.component;\n          if (comp.key === this.key) {\n            return\n          }\n          delete this.__childComponents[comp.key];\n          event.detail.component._parent = null;\n        }\n      },\n      // Add WebSocket connection method\n      __connectToWebSocket() {\n        if (!window.Tetra.ws || window.Tetra.ws.readyState === WebSocket.CLOSED) {\n          // Initialize WebSocket if not already done\n          window.Tetra.ws = new WebSocket(`ws://${window.location.host}/ws/tetra/`);\n          \n          window.Tetra.ws.onmessage = (event) => {\n            const data = JSON.parse(event.data);\n            // Dispatch the push message as a custom event\n            document.dispatchEvent(new CustomEvent('tetra:push-message', {\n              detail: data\n            }));\n          };\n          \n          window.Tetra.ws.onopen = () => {\n            console.log('Tetra WebSocket connected');\n          };\n          \n          window.Tetra.ws.onclose = () => {\n            console.log('Tetra WebSocket disconnected');\n            // Optionally implement reconnection logic here\n          };\n        }\n\n        // Listen for push messages relevant to this component\n        document.addEventListener('tetra:push-message', (event) => {\n          const { topic, data } = event.detail;\n          // Check if this component should handle this topic\n          if (this._push_topics && this._push_topics.includes(topic)) {\n            this.handlePushMessage(topic, data);\n          }\n        });\n      },\n      \n      // Default push message handler - can be overridden by components\n      handlePushMessage(topic, data) {\n        // Default behavior - components can override this method\n        console.log(`Received push message for topic ${topic}:`, data);\n      }\n    }\n  },\n\n  makeServerMethods(serverMethods) {\n    const methods = {};\n    serverMethods.forEach((serverMethod) => {\n      var func = async function(...args) {\n        // TODO: ensure only one concurrent?\n        return await Tetra.callServerMethod(this, serverMethod.name, serverMethod.endpoint, args)\n      }\n      if (serverMethod.debounce) {\n        func = Tetra.debounce(func, serverMethod.debounce, serverMethod.debounce_immediate)\n      } else if (serverMethod.throttle) {\n        func = Tetra.throttle(func, serverMethod.throttle, {\n          leading: serverMethod.throttle_leading,\n          trailing: serverMethod.throttle_trailing\n        })\n      }\n      methods[serverMethod.name] = func;\n    })\n    return methods\n  },\n\n  makeAlpineComponent(componentName, script, serverMethods, serverProperties) {\n    Alpine.data(\n      componentName,\n      (initialDataJson) => {\n        const {init, destroy, ...script_rest} = script;\n        const initialData = Tetra.jsonDecode(initialDataJson);\n        const data = {\n          componentName,\n          __initInner: init,\n          __destroyInner: destroy,\n          __serverMethods: serverMethods,\n          __serverProperties: serverProperties,\n          ...(initialData || {}),\n          ...script_rest,\n          ...Tetra.makeServerMethods(serverMethods),\n          ...Tetra.alpineComponentMixins(),\n        }\n        return data\n      }\n    )\n  },\n\n  getStateWithChildren(component) {\n    const data = {}\n    component.__serverProperties.forEach((key) => {\n      data[key] = component[key]\n    })\n    const r = {\n      encrypted: component.__state,\n      data: data,\n      children: []\n    }\n    for (const key in component.__childComponents) {\n      const comp = component.__childComponents[key];\n      r.children.push(Tetra.getStateWithChildren(comp));\n    }\n    return r;\n  },\n\n  loadScript(src) {\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = src;\n      script.onload = resolve;\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n  },\n\n  loadStyles(href) {\n    return new Promise((resolve, reject) => {\n      const link = document.createElement('link');\n      link.href = href;\n      link.rel  = 'stylesheet';\n      link.type = 'text/css';\n      link.onload = resolve;\n      link.onerror = reject;\n      document.head.appendChild(link);\n    });\n  },\n  getFilenameFromContentDisposition(contentDisposition) {\n      if (!contentDisposition) return null;\n\n      // First, try to get the filename* parameter (RFC 5987)\n      let matches = /filename\\*=([^']*)'([^']*)'([^;]*)/i.exec(contentDisposition);\n      if (matches) {\n          // Decode the UTF-8 encoded filename\n          try {\n              return decodeURIComponent(matches[3]);\n          } catch (e) {\n              console.warn('Error decoding filename:', e);\n          }\n      }\n      // Try to get the regular filename parameter\n      matches = /filename=[\"']?([^\"';\\n]*)[\"']?/i.exec(contentDisposition);\n      if (matches) {\n          return matches[1];\n      }\n      return null;\n  },\n\n  async handleServerMethodResponse(response, component) {\n    if (response.status === 200) {\n      if (response.headers.get('T-Response') !== \"true\") {\n        throw new Error(\"Response is not a Tetra response. Please check the server implementation.\")\n      }\n      // handle Django messages and emit \"tetra:new-message\" for each one, so components can react on that individually\n      const messages = Tetra.jsonDecode(response.headers.get('T-Messages'));\n      if (messages) {\n        messages.forEach((message, index) => {\n          component.$dispatch('tetra:new-message', message)\n        })\n      }\n      const cd = response.headers.get('Content-Disposition')\n      if (cd?.startsWith(\"attachment\")) {\n        const a = document.createElement('a')\n        a.href = URL.createObjectURL(await response.blob())\n        a.download = this.getFilenameFromContentDisposition(cd)\n        a.click()\n        a.remove()\n        return;\n\n      }\n      const respData = Tetra.jsonDecode(await response.text());\n      if (respData.success) {\n        let loadingResources = [];\n        respData.js.forEach(src => {\n          if (!document.querySelector(`script[src=\"${CSS.escape(src)}\"]`)) {\n            loadingResources.push(Tetra.loadScript(src));\n          }\n        })\n        respData.styles.forEach(src => {\n          if (!document.querySelector(`link[href=\"${CSS.escape(src)}\"]`)) {\n            loadingResources.push(Tetra.loadStyles(src));\n          }\n        })\n        await Promise.all(loadingResources);\n        if (respData.callbacks) {\n          respData.callbacks.forEach((item) => {\n            // iterate down path to callback\n            let obj = component;\n            item.callback.forEach((name, i) => {\n              if (i === item.callback.length-1) {\n                obj[name](...item.args);\n              } else {\n                obj = obj[name];\n                console.log(name, obj)\n              }\n            })\n          })\n        }\n        return respData.result;\n      } else {\n        // TODO: better errors\n        throw new Error('Error processing public method');\n      }\n    } else {\n      throw new Error(`Server responded with an error ${response.status} (${response.statusText})`);\n    }\n  },\n\n  async callServerMethod(component, methodName, methodEndpoint, args) {\n    let component_state = Tetra.getStateWithChildren(component);\n    component_state.args = args? args : [];\n    let payload = {\n      method: 'POST',\n      headers: {\n        'T-Request': \"true\",\n        'T-Current-URL': document.location.href,\n        'X-CSRFToken': window.__tetra_csrfToken,\n      },\n      mode: 'same-origin',\n    }\n\n    let formData = new FormData();\n    let hasFiles = false;\n    for(const [key, value] of Object.entries(component_state.data)){\n      // TODO: handle multi-file uploads\n      if (value instanceof File) {\n        hasFiles = true;\n        // A file is not uploaded anyway, as the browser automatically deletes the data if submitted within a JSON.\n        // On the server, only an empty {} will arrive, so we can set it to {} anyway.\n        component_state.data[key] = {};\n        formData.append(key, value);\n        // TODO: prevent re-uploading of files that are already uploaded.\n      }\n    }\n\n    // check if FormData has *any* entry - and if not, send JSON request\n    if (hasFiles) {\n      formData.append('component_state', Tetra.jsonEncode(component_state));\n      payload.body = formData;\n    } else {\n      payload.body = Tetra.jsonEncode(component_state)\n      payload.headers['Content-Type'] = 'application/json'\n    }\n    component.$dispatch('tetra:before-request', {component: this});\n    const response = await fetch(methodEndpoint, payload);\n    component.$dispatch('tetra:after-request', {component: this})\n    return await this.handleServerMethodResponse(response, component);\n  },\n\n  jsonReplacer(key, value) {\n    if (value instanceof Date) {\n      return {\n        __type: 'datetime',\n        value: value.toISOString(),\n      };\n    } else if (value instanceof Set) {\n      return {\n        __type: 'set',\n        value: Array.from(value)\n      };\n    }\n    // else if (value?.[0] instanceof File) {\n    //   return {\n    //     __type: 'file',\n    //     name: value[0].name,\n    //     value: value[0],\n    //     size: value[0].size,\n    //     content_type: value[0].type,\n    //   };\n    // }\n    return value;\n  },\n\n  jsonReviver(key, value) {\n    if (value && typeof value === 'object' && value.__type) {\n      if (value.__type === 'datetime') {\n        return new Date(value);\n      } else if (value.__type === 'set') {\n        return new Set(value);\n      }\n    }\n    return value\n  },\n\n  jsonEncode(obj) {\n    return JSON.stringify(obj, Tetra.jsonReplacer);\n  },\n\n  jsonDecode(s) {\n    return JSON.parse(s, Tetra.jsonReviver)\n  },\n\n  debounce(func, wait, immediate) {\n    var timeout\n    return function() {\n      var context = this, args = arguments\n      var later = function () {\n        timeout = null\n        if (!immediate) func.apply(context, args);\n      }\n      var callNow = immediate && !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n      if (callNow) func.apply(context, args);\n    }\n  },\n\n  throttle(func, wait, options) {\n    // From Underscore.js\n    // https://underscorejs.org\n    // (c) 2009-2022 Jeremy Ashkenas, Julian Gonggrijp, and DocumentCloud and\n    // Investigative Reporters & Editors\n    // Underscore may be freely distributed under the MIT license.\n    // --\n    // Returns a function, that, when invoked, will only be triggered at most once\n    // during a given window of time. Normally, the throttled function will run\n    // as much as it can, without ever going more than once per `wait` duration;\n    // but if you'd like to disable the execution on the leading edge, pass\n    // `{leading: false}`. To disable execution on the trailing edge, ditto.\n    var timeout, context, args, result;\n    var previous = 0;\n    if (!options) options = {};\n\n    var later = function() {\n      previous = options.leading === false ? 0 : now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n\n    var throttled = function() {\n      var _now = new Date().getTime();\n      if (!previous && options.leading === false) previous = _now;\n      var remaining = wait - (_now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = _now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n\n    throttled.cancel = function() {\n      clearTimeout(timeout);\n      previous = 0;\n      timeout = context = args = null;\n    };\n\n    return throttled;\n  }\n\n}\n\nexport default Tetra;\n", "import Tetra from './tetra.core'\n\nwindow.Tetra = Tetra;\nwindow.document.addEventListener('alpine:init', () => {\n  Tetra.init();\n})\n"],
  "mappings": "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",
  "names": []
}
