{
  "version": 3,
  "sources": ["../../../js/tetra.core.js", "../../../js/tetra.js"],
  "sourcesContent": ["\nconst Tetra = {\n  ws: null,\n  pendingSubscriptions: new Map(), // Store subscriptions until WS is ready\n\n  init() {\n    Alpine.magic('static', () => Tetra.$static);\n    // Initialize WebSocket connection immediately, if in use\n    if(window.__tetra_useWebsockets) {\n      this.ensureWebSocketConnection();\n    }\n    // Handle initial messages passed from the server\n    if (window.__tetra_messages) {\n      this.handleInitialMessages(window.__tetra_messages);\n      delete window.__tetra_messages;\n    }\n\n    // Initialize global subscription store\n    if (!Alpine.store('tetra_subscriptions')) {\n      Alpine.store('tetra_subscriptions', {});\n    }\n  },\n  handleInitialMessages(messages) {\n    // We need to wait for Alpine components to be ready before dispatching events to them.\n    // However, since we use 'defer' for tetra.js and Alpine, they should be ready around the same time.\n    // To be safe, we can use Alpine.nextTick or a small timeout if needed, but \n    // usually dispatching on document should work if components listen there.\n    messages.forEach((message) => {\n      document.dispatchEvent(new CustomEvent('tetra:new-message', {\n        detail: message,\n        bubbles: true\n      }));\n    });\n  },\n  $static() {\n    return (path) => {\n      return window.__tetra_staticRoot + path;\n    }\n  },\n  // Add WebSocket management methods\n  ensureWebSocketConnection() {\n    if (!this.ws || this.ws.readyState === WebSocket.CLOSED) {\n      console.log(\"Connecting to Tetra WebSocket...\");\n      const ws_scheme = window.location.protocol === \"https:\" ? \"wss\" : \"ws\";\n      const ws_url = `${ws_scheme}://${window.location.host}/ws/tetra/`;\n      this.ws = new WebSocket(ws_url);\n\n      this.ws.onopen = () => {\n        console.debug('Tetra WebSocket connected');\n        // Process any pending subscriptions\n        this.pendingSubscriptions.forEach((data, componentId) => {\n          this.ws.send(JSON.stringify(data));\n        });\n        this.pendingSubscriptions.clear();\n      };\n\n      this.ws.onmessage = (event) => {\n        const data = JSON.parse(event.data);\n        // Dispatch to all reactive components\n        // document.dispatchEvent(new CustomEvent('tetra:push-message', {detail: data}));\n        this.handleWebsocketMessage(data);\n      };\n\n      this.ws.onclose = () => {\n        console.log('Tetra WebSocket disconnected');\n        // Attempt to reconnect after 3 seconds\n        setTimeout(() => {\n          this.ensureWebSocketConnection();\n        }, 3000);\n      };\n\n      this.ws.onerror = (error) => {\n        console.error('Tetra WebSocket error:', error);\n      };\n    }\n    return this.ws;\n  },\n  _get_component_by_id(component_id) {\n    // Find the component by ID and return it\n    const componentEl = document.querySelector(`[tetra-component-id=\"${component_id}\"]`);\n    if (!componentEl) {\n      console.error(`AlpineJs Component with ID ${component_id} not found.`);\n      return;\n    }\n    return Alpine.$data(componentEl);\n  },\n  _get_components_by_subscribe_group(group) {\n    // Find all components by subscribe topic and return them\n    const store = Alpine.store('tetra_subscriptions');\n    const componentIds = store[group] || [];\n    // Ensure we return a unique list of component data objects that actually exist in DOM\n    const components = componentIds.map(id => this._get_component_by_id(id)).filter(c => !!c && typeof c._removeComponent === 'function');\n    return [...new Set(components)];\n  },\n  handleWebsocketMessage(data) {\n    // This function centrally handles incoming websocket data and dispatches it to the\n    // corresponding methods, if necessary.\n    \n    let messageType;\n    let payload;\n    let metadata = {};\n\n    if (data.protocol !== \"tetra-1.0\") {\n      console.warn('Invalid or missing Tetra protocol in WebSocket message:', data);\n      return;\n    }\n\n    messageType = data.type;\n    payload = data.payload;\n    metadata = data.metadata || {};\n\n    switch (messageType) {\n      case 'subscription.response':\n        this.handleSubscriptionResponse(payload);\n        break;\n\n      case 'notify':\n        this.handleGroupNotify(payload);\n        break;\n\n      case 'component.data_updated':\n        this.handleComponentUpdateData(payload);\n        break;\n\n      case 'component.removed':\n        this.handleComponentRemove(payload);\n        break;\n\n      case 'component.created':\n        this.handleComponentCreated(payload);\n        break;\n\n      default:\n        console.warn('Unknown WebSocket message type:', messageType, \":\", data);\n    }\n  },\n  handleSubscriptionResponse(event){\n    switch(event[\"status\"]) {\n      case \"subscribed\":\n        console.debug(\"Subscription to group\", event[\"group\"], \"successful.\")\n        document.dispatchEvent(new CustomEvent(`tetra:component-subscribed`,  {\n          detail: {\n            component: this,\n            group: event[\"group\"]\n          },\n        }))\n        break;\n      case \"unsubscribed\":\n        console.debug(\"Subscription to group\", event[\"group\"], \"redacted successfully.\")\n        document.dispatchEvent(new CustomEvent(`tetra:component-unsubscribed`,  {\n          detail: {\n            component: this,\n            group: event[\"group\"]\n          },\n        }))\n        break;\n      case \"resubscribed\":\n        console.debug(\"Re-subscription to group\", event[\"group\"], \"successful.\")\n        document.dispatchEvent(new CustomEvent(`tetra:component-resubscribed`,  {\n          detail: {\n            component: this,\n            group: event[\"group\"]\n          },\n        }))\n        break;\n      case \"error\":\n        console.error(\"Error subscribing component\", event[\"component_id\"], \"to group\", event[\"group\"], \":\", event[\"message\"])\n        document.dispatchEvent(new CustomEvent(`tetra:component-subscription-error`,  {\n          detail: {\n            component: this,\n            group: event[\"group\"],\n            message:event[\"message\"]\n          },\n        }))\n        break;\n      default:\n        console.debug(\"Subscription response faulty:\", event)\n    }\n  },\n  handleGroupNotify(event) {\n    /// Dispatch a custom event that was sent from the server as notification\n    const { group, event_name, data } = event;\n\n    // Dispatch group-specific event\n    document.dispatchEvent(new CustomEvent(event_name, {\n      detail: {\n        data,\n        group,\n      }\n    }));\n  },\n  handleComponentUpdateData(event) {\n    const { group, data, sender_id } = event;\n    const components = this._get_components_by_subscribe_group(group);\n    // iter through components and update their data fields\n    components.forEach((component) => {\n      // Skip update if this component is currently waiting for a response\n      // from the request that triggered this server-side change.\n      if (\n        sender_id &&\n        component.__activeRequests &&\n        component.__activeRequests.has(sender_id)\n      ) {\n        return;\n      }\n      if (data && Object.keys(data).length > 0) {\n        component._updateData(data);\n      } else {\n        component._refresh();\n      }\n    });\n  },\n  handleComponentRemove(event) {\n    const { type, group, component_id, target_group, sender_id } = event;\n\n    if (component_id) {\n      const component = this._get_component_by_id(component_id)\n\n      if (component && component._removeComponent) {\n        if (\n          sender_id &&\n          component.__activeRequests &&\n          component.__activeRequests.has(sender_id)\n        ) {\n          return;\n        }\n        component._removeComponent();\n      }\n      return;\n    }\n\n    if (target_group) {\n      const components = this._get_components_by_subscribe_group(target_group);\n      components.forEach(component => {\n        if (component && component._removeComponent) {\n          if (\n            sender_id &&\n            component.__activeRequests &&\n            component.__activeRequests.has(sender_id)\n          ) {\n            return;\n          }\n          component._removeComponent();\n        }\n      });\n      return;\n    }\n\n    // Fallback: If no component_id or target_group is provided, find all \n    // components subscribed to the group and remove them.\n    const components = this._get_components_by_subscribe_group(group);\n    components.forEach(component => {\n      if (component && component._removeComponent) {\n        if (\n          sender_id &&\n          component.__activeRequests &&\n          component.__activeRequests.has(sender_id)\n        ) {\n          return;\n        }\n        component._removeComponent();\n      }\n    });\n  },\n  handleComponentCreated(event) {\n    const { group, data, component_id, target_group, sender_id } = event;\n    const components = this._get_components_by_subscribe_group(group);\n    components.forEach((component) => {\n      if (\n        sender_id &&\n        component.__activeRequests &&\n        component.__activeRequests.has(sender_id)\n      ) {\n        return;\n      }\n      if (typeof component._refresh === 'function') {\n        component._refresh();\n      } else {\n        component._updateHtml();\n      }\n    });\n  },\n  sendWebSocketMessage(message) {\n    if (!this.ws) {\n      console.log(\"WebSocket is not connected. Cannot send message.\");\n      return\n    }\n    if (this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(JSON.stringify(message));\n    } else {\n      // Store subscription messages until connection is ready\n      if (message.type === 'subscribe' && message.component_id) {\n        this.pendingSubscriptions.set(message.component_id, message);\n      }\n      // Queue other messages\n      this.ws.addEventListener('open', () => {\n        this.ws.send(JSON.stringify(message));\n      }, { once: true });\n    }\n  },\n  alpineComponentMixins() {\n    return {\n      // Alpine.js lifecycle:\n      init() {\n        this.component_id = this.$el.getAttribute('tetra-component-id');\n        this.$dispatch('tetra:child-component-init', {component:  this});\n        // Set component ID attribute on DOM element for targeting\n        this.__initServerWatchers();\n        this.__initStores();\n\n        // Auto-subscribe if component is reactive\n        if (window.__tetra_useWebsockets && this.$el.hasAttribute('tetra-reactive')) {\n          Tetra.ensureWebSocketConnection();\n\n          // Handle dynamic subscriptions from template\n\n          const group = this.$el.getAttribute('tetra-subscription');\n          if (group) {\n            this._subscribe(group);\n          }\n        }\n\n        if (this.__initInner) {\n          this.__initInner();\n        }\n\n        this._handleAutofocus();\n\n        const addClassToExternalIndicators = () => {\n          // adds `tetra-indicator` class to all elements targeted with `t-indicator` attribute\n          const elementsWithIndicator = [this.$el, ...Array.from(this.$el.querySelectorAll('[t-indicator]'))]\n          elementsWithIndicator.forEach(el => {\n            const indicators = el.getAttribute('t-indicator')\n            if (indicators) {\n              // If an explicit selector is given, hide it and add marker class to find it later\n              document.querySelectorAll(indicators).forEach(indicator => {\n                if (indicator.getAttribute('hidden') === null) {\n                  // indicator.setAttribute('hidden', '');\n                  indicator.hidden = true;\n                }\n                indicator.classList.add('tetra-indicator-' + this.component_id);\n              });\n            }\n          });\n        };\n        addClassToExternalIndicators();\n        this.$el.addEventListener('tetra:component-updated', addClassToExternalIndicators);\n\n        const handleRequestEvent = (event, isBefore) => {\n          const triggerEl = event.detail.triggerEl || event.target;\n          const requestId = event.detail.requestId;\n\n          if (!this.$el.contains(triggerEl) && this.$el !== triggerEl) return;\n\n          if (!this.__activeRequests) {\n            this.__activeRequests = new Map();\n          }\n\n          if (isBefore) {\n            let triggerSelector = '';\n            if (triggerEl.id) {\n              triggerSelector = '#' + triggerEl.id;\n            }\n            this.__activeRequests.set(requestId, {\n              triggerSelector: triggerSelector,\n              indicatorSelector: triggerEl.getAttribute('t-indicator'),\n              completed: false,\n            });\n          } else {\n            const request = this.__activeRequests.get(requestId);\n            if (request) {\n              request.completed = true;\n            }\n            // We keep it in the map for a short while after the request is \"completed\"\n            // to allow handleComponentUpdateData to catch late-arriving WS messages.\n            setTimeout(() => {\n              this.__activeRequests.delete(requestId);\n            }, 5000);\n          }\n\n          const updateElementState = (el, reqId, isStart) => {\n            if (!el.__activeRequests) el.__activeRequests = new Set();\n            if (isStart) el.__activeRequests.add(reqId);\n            else el.__activeRequests.delete(reqId);\n            return el.__activeRequests.size > 0;\n          }\n\n          const hasActive = updateElementState(triggerEl, requestId, isBefore);\n          triggerEl.classList.toggle(\"tetra-request\", hasActive);\n\n          const selector = triggerEl.getAttribute('t-indicator');\n          if (selector) {\n            const localIndicators = Array.from(this.$el.querySelectorAll(selector))\n            const globalIndicators = Array.from(document.querySelectorAll('.tetra-indicator-' + this.component_id))\n\n            const allIndicators = new Set(localIndicators)\n            globalIndicators.forEach(el => {\n              if (el.matches(selector)) {\n                allIndicators.add(el)\n              }\n            })\n\n            allIndicators.forEach(el => {\n              const active = updateElementState(el, requestId, isBefore);\n              if (active) {\n                el.removeAttribute('hidden');\n                el.hidden = false;\n              } else {\n                el.setAttribute('hidden', '');\n                el.hidden = true;\n              }\n            })\n          }\n        };\n\n        const reapplyLoadingState = () => {\n          if (!this.__activeRequests || this.__activeRequests.size === 0) return;\n\n          this.__activeRequests.forEach((info, reqId) => {\n            // ONLY reapply if the request is NOT yet completed.\n            // If it is completed, it's only in the Map to block WS updates.\n            if (info.completed) return;\n\n            if (info.triggerSelector) {\n              const triggers = this.$el.querySelectorAll(info.triggerSelector);\n              triggers.forEach(el => {\n                if (!el.__activeRequests) el.__activeRequests = new Set();\n                el.__activeRequests.add(reqId);\n                el.classList.add(\"tetra-request\");\n              });\n            }\n            if (info.indicatorSelector) {\n              const localIndicators = Array.from(this.$el.querySelectorAll(info.indicatorSelector))\n              const globalIndicators = Array.from(document.querySelectorAll('.tetra-indicator-' + this.component_id))\n\n              const allIndicators = new Set(localIndicators)\n              globalIndicators.forEach(el => {\n                if (el.matches(info.indicatorSelector)) {\n                  allIndicators.add(el)\n                }\n              })\n              \n              allIndicators.forEach(el => {\n                if (!el.__activeRequests) el.__activeRequests = new Set();\n                el.__activeRequests.add(reqId);\n                el.removeAttribute('hidden');\n                el.hidden = false;\n              });\n            }\n          });\n        };\n\n        this.$el.addEventListener(\"tetra:before-request\", (event) => handleRequestEvent(event, true));\n        this.$el.addEventListener(\"tetra:after-request\", (event) => handleRequestEvent(event, false));\n        this.$el.addEventListener('tetra:component-updated', reapplyLoadingState);\n      },\n      destroy() {\n        this.$dispatch('tetra:child-component-destroy', {component:  this});\n\n        // Unsubscribe from all group when component is destroyed\n        if (!this.__isUpdating && this.__subscribedGroups) {\n          [...this.__subscribedGroups].forEach(group => {\n            this._unsubscribe(group);\n          });\n        }\n\n        if (this.__destroyInner) {\n          this.__destroyInner();\n        }\n      },\n      // Tetra built ins:\n      _updateHtml(html) {\n        this.__isUpdating = true;\n        Alpine.morph(this.$root, html, {\n          updating(el, toEl, childrenOnly, skip) {\n            if (toEl.hasAttribute && toEl.hasAttribute('x-data-maintain') && el.hasAttribute && el.hasAttribute('x-data')) {\n              toEl.setAttribute('x-data', el.getAttribute('x-data'));\n              toEl.removeAttribute('x-data-maintain');\n            } else if (toEl.hasAttribute && toEl.hasAttribute('x-data-update') && el.hasAttribute && el.hasAttribute('x-data')) {\n              let data = Tetra.jsonDecode(toEl.getAttribute('x-data-update'));\n              let old_data = Tetra.jsonDecode(toEl.getAttribute('x-data-update-old'));\n              let comp = window.Alpine.$data(el);\n              for (const key in data) {\n                if (old_data.hasOwnProperty(key) && (old_data[key] !== comp[key])) {\n                  // If the data that was submitted to the server has since changed we don't overwrite it\n                  continue\n                }\n                comp[key] = data[key];\n              }\n              toEl.setAttribute('x-data', el.getAttribute('x-data'));\n              toEl.removeAttribute('x-data-update');\n            }\n          },\n          lookahead: true\n        });\n        this.__isUpdating = false;\n\n        // Check for subscription changes after morphing\n        if (window.__tetra_useWebsockets && this.$el.hasAttribute('tetra-reactive')) {\n          const group = this.$el.getAttribute('tetra-subscription');\n          const currentTopics = group ? group.split(',').map(t => t.trim()) : [];\n          const oldTopics = this.__subscribedGroups ? Array.from(this.__subscribedGroups) : [];\n          \n          // Unsubscribe from topics that are no longer present\n          oldTopics.forEach(topic => {\n            if (!currentTopics.includes(topic)) {\n              this._unsubscribe(topic);\n            }\n          });\n          \n          // Subscribe to new topics\n          currentTopics.forEach(topic => {\n            if (!this.__subscribedGroups || !this.__subscribedGroups.has(topic)) {\n              this._subscribe(topic);\n            }\n          });\n        }\n\n        this._handleAutofocus();\n        this.$dispatch('tetra:component-updated', { component: this });\n      },\n      _updateData(data) {\n        let activeEl = document.activeElement;\n        let focusedModel = null;\n        if (activeEl && (activeEl.tagName === 'INPUT' || activeEl.tagName === 'TEXTAREA' || activeEl.tagName === 'SELECT') && this.$el.contains(activeEl)) {\n          // Check if the focused element is bound to a model\n          focusedModel = activeEl.getAttribute('x-model');\n          if (!focusedModel) {\n            // also check for x-model on parent elements, up to the component root\n            let el = activeEl.parentElement;\n            while (el && el !== this.$el && !focusedModel) {\n              focusedModel = el.getAttribute('x-model');\n              el = el.parentElement;\n            }\n          }\n        }\n\n        for (const key in data) {\n          if (focusedModel === key) {\n            console.debug(`Skipping update for focused field: ${key}`);\n            continue;\n          }\n          this[key] = data[key];\n        }\n        // this._handleAutofocus(); // TODO: evaluate if this would make sense too\n        this.$dispatch('tetra:component-data-updated', { component: this });\n      },\n      _setValueByName(name, value){\n        // sets value to the input field with the given name\n        // This is especially useful for emptying a file field, as the browser doesn't do that on page refreshes.\n        let inputs = document.getElementsByName(name);\n        for (let i = 0; i < inputs.length; i++) {\n          inputs[i].value = value;\n        }\n      },\n      _removeComponent() {\n        this.$dispatch('tetra:component-before-remove', { component: this });\n        this.$root.remove();\n      },\n      // _addComponent(html, position = 'append') {\n      //   this.$dispatch('tetra:component-before-add', { component: this, html: html, position: position });\n      //   let targetEl = this.$el;\n      //   const container = this.$el.querySelector('[tetra-container]');\n      //   if (container) {\n      //     targetEl = container;\n      //   }\n      //\n      //   if (position === 'append') {\n      //     targetEl.insertAdjacentHTML('beforeend', html);\n      //   } else if (position === 'prepend') {\n      //     targetEl.insertAdjacentHTML('afterbegin', html);\n      //   } else {\n      //     targetEl.insertAdjacentHTML(position, html);\n      //   }\n      //   this.$dispatch('tetra:component-added', { component: this });\n      // },\n      _replaceComponent(html) {\n        this.__isUpdating = true;\n        this.$dispatch('tetra:component-before-remove', { component: this });\n        this.$root.insertAdjacentHTML('afterend', html);\n        this.$root.remove();\n        this.__isUpdating = false;\n        this.$dispatch('tetra:component-updated', { component: this });\n        this._handleAutofocus();\n      },\n      _redirect(url) {\n        document.location = url;\n      },\n      _dispatch(name, data) {\n        this.$dispatch(name, {\n          _component: this,\n          ...data\n        });\n      },\n      _pushUrl(url, replace=false) {\n        if(replace){\n          window.history.replaceState(null, '', url);\n        } else {\n          window.history.pushState(null, '', url);\n        }\n      },\n      _updateSearchParam(param, value) {\n        const url = new URL(window.location);\n        if (value) {\n          url.searchParams.set(param, value);\n        } else {\n          url.searchParams.delete(param);\n        }\n        window.history.pushState(null, \"\", url.toString());\n      },\n      _handleAutofocus() {\n        this.$nextTick(() => {\n          if (!this.$root) {\n            return;\n          }\n          const focus_el = this.$root.querySelector(\"[autofocus]\");\n          if (focus_el) {\n            focus_el.focus();\n          }\n        });\n      },\n\n      // Push notification methods\n      _subscribe(groupName) {\n        if (!this.__subscribedGroups) {\n          this.__subscribedGroups = new Set();\n        }\n\n        const store = Alpine.store('tetra_subscriptions');\n        const topics = groupName.split(',').map(t => t.trim());\n        \n        topics.forEach(topic => {\n          this.__subscribedGroups.add(topic);\n          \n          if (!store[topic]) {\n            store[topic] = [];\n          }\n          \n          if (!store[topic].includes(this.component_id)) {\n            const isFirst = store[topic].length === 0;\n            store[topic].push(this.component_id);\n            \n            if (isFirst) {\n              Tetra.sendWebSocketMessage({\n                type: 'subscribe',\n                group: topic,\n                component_id: this.component_id,\n                component_class: this.componentName,\n              });\n            }\n          }\n        });\n      },\n\n      _unsubscribe(groupName) {\n        if (!this.__subscribedGroups) return;\n\n        const store = Alpine.store('tetra_subscriptions');\n        const topics = groupName.split(',').map(t => t.trim());\n\n        topics.forEach(topic => {\n          this.__subscribedGroups.delete(topic);\n          \n          if (store[topic]) {\n            const index = store[topic].indexOf(this.component_id);\n            if (index > -1) {\n              store[topic].splice(index, 1);\n              if (store[topic].length === 0) {\n                delete store[topic];\n                Tetra.sendWebSocketMessage({\n                  type: 'unsubscribe',\n                  group: topic,\n                  component_id: this.component_id\n                });\n              }\n            }\n          }\n        });\n      },\n\n      _notifyGroup(groupName, eventName, data) {\n        return Tetra.sendWebSocketMessage({\n          type: 'notify',\n          group: groupName,\n          event_name: eventName,\n          data: data,\n          sender_id: this.component_id\n        });\n      },\n\n\n      // Tetra private:\n      __initServerWatchers() {\n        this.__serverMethods.forEach(item => {\n          if (item.watch) {\n            item.watch.forEach(propName => {\n              this.$watch(propName, async (value, oldValue) => {\n                await this[item.name](value, oldValue, propName);\n              })\n            })\n          }\n        })\n      },\n      __initStores() {\n        if (!this.__serverStores) return;\n\n        Object.entries(this.__serverStores).forEach(([propName, storePath]) => {\n          const parts = storePath.split('.');\n          const storeName = parts[0];\n          const propertyPath = parts.slice(1);\n\n          // Initialize store if it doesn't exist\n          if (!Alpine.store(storeName)) {\n            Alpine.store(storeName, {});\n          }\n\n          const getStoreValue = () => {\n            let val = Alpine.store(storeName);\n            for (const part of propertyPath) {\n              if (val === undefined || val === null || typeof val !== 'object') return undefined;\n              val = val[part];\n            }\n            return val;\n          };\n\n          const setStoreValue = (value) => {\n            if (propertyPath.length === 0) {\n              if (Alpine.store(storeName) !== value) {\n                Alpine.store(storeName, value);\n              }\n            } else {\n              let obj = Alpine.store(storeName);\n              for (let i = 0; i < propertyPath.length - 1; i++) {\n                const part = propertyPath[i];\n                if (!(part in obj) || typeof obj[part] !== 'object') obj[part] = {};\n                obj = obj[part];\n              }\n              const lastPart = propertyPath[propertyPath.length - 1];\n              if (obj[lastPart] !== value) {\n                obj[lastPart] = value;\n              }\n            }\n          };\n\n          // Track previous store value to detect actual store changes\n          let prevStoreVal = getStoreValue();\n\n          // Two-way sync: Store -> Component\n          Alpine.effect(() => {\n            const storeVal = getStoreValue();\n\n            // Only update component if the STORE value actually changed\n            if (storeVal !== prevStoreVal && storeVal !== undefined) {\n              prevStoreVal = storeVal;\n              if (this[propName] !== storeVal) {\n                this.__isSyncingFromStore = propName;\n                this[propName] = storeVal;\n                this.$nextTick(() => {\n                  if (this.__isSyncingFromStore === propName) {\n                    this.__isSyncingFromStore = null;\n                  }\n                });\n              }\n            }\n          });\n\n          // Two-way sync: Component -> Store\n          this.$watch(propName, (value) => {\n            if (this.__isSyncingFromStore !== propName) {\n              const currentStoreVal = getStoreValue();\n              if (currentStoreVal !== value) {\n                setStoreValue(value);\n                prevStoreVal = value; // Update tracking after successful store update\n              }\n            }\n          });\n\n          // Initial sync: Check if store already has a value\n          const initialStoreVal = getStoreValue();\n          if (initialStoreVal !== undefined) {\n            // Store already has a value (set by another component)\n            // Update component to match the store immediately\n            this[propName] = initialStoreVal;\n            prevStoreVal = initialStoreVal;\n          } else {\n            // Store doesn't have a value yet\n            // Initialize it with this component's value\n            setStoreValue(this[propName]);\n            prevStoreVal = this[propName];\n          }\n        });\n      },\n      __childComponents: {},\n      __rootBind: {\n        ['@tetra:child-component-init'](event) {\n          event.stopPropagation();\n          const comp = event.detail.component;\n          if (comp.key === this.key) {\n            return\n          }\n          if (comp.key) {\n            this.__childComponents[comp.key] = comp;\n          }\n          comp._parent = this;\n        },\n        ['@tetra:child-component-destroy'](event) {\n          event.stopPropagation();\n          const comp = event.detail.component;\n          if (comp.key === this.key) {\n            return\n          }\n          delete this.__childComponents[comp.key];\n          event.detail.component._parent = null;\n        }\n      }\n    }\n  },\n\n  makeServerMethods(serverMethods) {\n    const methods = {};\n    serverMethods.forEach((serverMethod) => {\n      var func = async function(...args) {\n        // TODO: ensure only one concurrent?\n        return await Tetra.callServerMethod(this, serverMethod.name, serverMethod.endpoint, args)\n      }\n      if (serverMethod.debounce) {\n        func = Tetra.debounce(func, serverMethod.debounce, serverMethod.debounce_immediate)\n      } else if (serverMethod.throttle) {\n        func = Tetra.throttle(func, serverMethod.throttle, {\n          leading: serverMethod.throttle_leading,\n          trailing: serverMethod.throttle_trailing\n        })\n      }\n      methods[serverMethod.name] = func;\n    })\n    return methods\n  },\n\n  makeAlpineComponent(componentName, script, serverMethods, serverProperties) {\n    Alpine.data(\n        componentName,\n        (initialDataJson) => {\n          const {init, destroy, ...script_rest} = script;\n          const initialData = Tetra.jsonDecode(initialDataJson);\n          const data = {\n            componentName,\n            __initInner: init,\n            __destroyInner: destroy,\n            __serverMethods: serverMethods,\n            __serverProperties: serverProperties,\n            __serverStores: initialData?.__serverStores,\n            ...(initialData || {}),\n            ...script_rest,\n            ...Tetra.makeServerMethods(serverMethods),\n            ...Tetra.alpineComponentMixins(),\n          }\n          return data\n        }\n    )\n  },\n\n  getStateWithChildren(component) {\n    const data = {}\n    component.__serverProperties.forEach((key) => {\n      data[key] = component[key]\n    })\n    if (component.__serverStores) {\n      data[\"__serverStores\"] = component.__serverStores;\n    }\n    const r = {\n      encrypted: component.__state,\n      data: data,\n      children: []\n    }\n    for (const key in component.__childComponents) {\n      const comp = component.__childComponents[key];\n      r.children.push(Tetra.getStateWithChildren(comp));\n    }\n    return r;\n  },\n\n  loadScript(src) {\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = src;\n      script.onload = resolve;\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n  },\n\n  loadStyles(href) {\n    return new Promise((resolve, reject) => {\n      const link = document.createElement('link');\n      link.href = href;\n      link.rel  = 'stylesheet';\n      link.type = 'text/css';\n      link.onload = resolve;\n      link.onerror = reject;\n      document.head.appendChild(link);\n    });\n  },\n  getFilenameFromContentDisposition(contentDisposition) {\n    if (!contentDisposition) return null;\n\n    // First, try to get the filename* parameter (RFC 5987)\n    let matches = /filename\\*=([^']*)'([^']*)'([^;]*)/i.exec(contentDisposition);\n    if (matches) {\n      // Decode the UTF-8 encoded filename\n      try {\n        return decodeURIComponent(matches[3]);\n      } catch (e) {\n        console.warn('Error decoding filename:', e);\n      }\n    }\n    // Try to get the regular filename parameter\n    matches = /filename=[\"']?([^\"';\\n]*)[\"']?/i.exec(contentDisposition);\n    if (matches) {\n      return matches[1];\n    }\n    return null;\n  },\n\n  async handleServerMethodResponse(response, component) {\n    if (response.status === 200) {\n      const cd = response.headers.get('Content-Disposition')\n      if (cd?.startsWith(\"attachment\")) {\n        const a = document.createElement('a')\n        a.href = URL.createObjectURL(await response.blob())\n        a.download = this.getFilenameFromContentDisposition(cd)\n        a.click()\n        a.remove()\n        return;\n      }\n\n      const responseText = await response.text();\n      const respData = Tetra.jsonDecode(responseText);\n\n      let success = false;\n      let result = null;\n      let html = null;\n      let js = [];\n      let styles = [];\n      let messages = [];\n      let callbacks = [];\n\n      if (respData.protocol !== \"tetra-1.0\") {\n        throw new Error('Invalid or missing Tetra protocol in server response');\n      }\n\n      success = respData.success;\n      if (respData.payload) {\n        result = respData.payload.result;\n        html = respData.payload.html;\n      }\n      if (respData.metadata) {\n        js = respData.metadata.js || [];\n        styles = respData.metadata.styles || [];\n        messages = respData.metadata.messages || [];\n        callbacks = respData.metadata.callbacks || [];\n\n        // Fast lane for redirects\n        const redirectCallback = callbacks.find(item =>\n            item.callback && item.callback.length === 1 && item.callback[0] === '_redirect'\n        );\n        if (redirectCallback && redirectCallback.args && redirectCallback.args.length > 0) {\n          document.location = redirectCallback.args[0];\n          return;\n        }\n      }\n      if (!success && respData.error) {\n        console.error(`Tetra method error [${respData.error.code}]: ${respData.error.message}`);\n        // Emit event for custom error handling\n        document.dispatchEvent(new CustomEvent('tetra:method-error', {\n          detail: {\n            component: component,\n            error: respData.error\n          }\n        }));\n      }\n\n      // handle Django messages and emit \"tetra:new-message\" for each one\n      if (messages) {\n        messages.forEach((message) => {\n          component.$dispatch('tetra:new-message', message)\n        })\n      }\n\n      if (success) {\n        let loadingResources = [];\n        js.forEach(src => {\n          if (!document.querySelector(`script[src=\"${CSS.escape(src)}\"]`)) {\n            loadingResources.push(Tetra.loadScript(src));\n          }\n        })\n        styles.forEach(src => {\n          if (!document.querySelector(`link[href=\"${CSS.escape(src)}\"]`)) {\n            loadingResources.push(Tetra.loadStyles(src));\n          }\n        })\n        await Promise.all(loadingResources);\n\n        if (html) {\n          component._updateHtml(html);\n        }\n\n        if (callbacks) {\n          callbacks.forEach((item) => {\n            // iterate down path to callback\n            let obj = component;\n            item.callback.forEach((name, i) => {\n              if (i === item.callback.length-1) {\n                obj[name](...item.args);\n              } else {\n                obj = obj[name];\n              }\n            })\n          })\n        }\n        return result;\n      } else {\n        if (respData.error) {\n          throw new Error(`Error processing public method: ${respData.error.message}`);\n        }\n        throw new Error('Error processing public method');\n      }\n    } else {\n      throw new Error(`Server responded with an error ${response.status} (${response.statusText})`);\n    }\n  },\n\n  async callServerMethod(component, methodName, methodEndpoint, args) {\n    const requestId = Math.random().toString(36).substring(2, 15);\n    let component_state = Tetra.getStateWithChildren(component);\n    component_state.args = args || [];\n\n    const requestEnvelope = {\n      protocol: \"tetra-1.0\",\n      id: requestId,\n      type: \"call\",\n      payload: {\n        component_id: component.$el.getAttribute('tetra-component-id'),\n        method: methodName,\n        args: component_state.args,\n        state: component_state.data,\n        encrypted_state: component_state.encrypted,\n        children_state: component_state.children\n      }\n    };\n\n    let fetchPayload = {\n      method: 'POST',\n      headers: {\n        'T-Request': \"true\",\n        'T-Current-URL': document.location.href,\n        'X-CSRFToken': window.__tetra_csrfToken,\n      },\n      mode: 'same-origin',\n    }\n\n    let formData = new FormData();\n    let hasFiles = false;\n    for(const [key, value] of Object.entries(component_state.data)){\n      // TODO: handle multi-file uploads\n      if (value instanceof File) {\n        hasFiles = true;\n        // A file is not uploaded anyway, as the browser automatically deletes the data if submitted within a JSON.\n        // On the server, only an empty {} will arrive, so we can set it to {} anyway.\n        // In the protocol, we keep the original state, but when sending we might need to adjust.\n        requestEnvelope.payload.state[key] = {};\n        formData.append(key, value);\n        // TODO: prevent re-uploading of files that are already uploaded.\n      }\n    }\n\n    // check if FormData has *any* entry - and if not, send JSON request\n    if (hasFiles) {\n      formData.append('tetra_payload', Tetra.jsonEncode(requestEnvelope));\n      fetchPayload.body = formData;\n    } else {\n      fetchPayload.body = Tetra.jsonEncode(requestEnvelope)\n      fetchPayload.headers['Content-Type'] = 'application/json'\n    }\n    const triggerEl = component.$event ? component.$event.target : component.$el;\n    component.$dispatch('tetra:before-request', {\n      component: component,\n      triggerEl: triggerEl,\n      requestId: requestId\n    });\n    const response = await fetch(methodEndpoint, fetchPayload);\n    component.$dispatch('tetra:after-request', {\n      component: component,\n      triggerEl: triggerEl,\n      requestId: requestId\n    })\n    const result = await this.handleServerMethodResponse(response, component);\n\n    // If the request was successful, we might have already updated the data via\n    // the HTTP response. We keep the requestId in __activeRequests until now\n    // to ensure handleComponentUpdateData can filter it out if it arrives\n    // around the same time.\n    // However, the 'tetra:after-request' event already removed it from\n    // __activeRequests in the default Alpine mixin (if not overridden).\n    // Actually, looking at the code, tetra:after-request IS what removes it.\n\n    return result;\n  },\n\n  jsonReplacer(key, value) {\n    if (value instanceof Date) {\n      return {\n        __type: 'datetime',\n        value: value.toISOString(),\n      };\n    } else if (value instanceof Set) {\n      return {\n        __type: 'set',\n        value: Array.from(value)\n      };\n    }\n    // else if (value?.[0] instanceof File) {\n    //   return {\n    //     __type: 'file',\n    //     name: value[0].name,\n    //     value: value[0],\n    //     size: value[0].size,\n    //     content_type: value[0].type,\n    //   };\n    // }\n    return value;\n  },\n\n  jsonReviver(key, value) {\n    if (value && typeof value === 'object' && value.__type) {\n      if (value.__type === 'datetime') {\n        return new Date(value);\n      } else if (value.__type === 'set') {\n        return new Set(value);\n      }\n    }\n    return value\n  },\n\n  jsonEncode(obj) {\n    return JSON.stringify(obj, Tetra.jsonReplacer);\n  },\n\n  jsonDecode(s) {\n    return JSON.parse(s, Tetra.jsonReviver)\n  },\n\n  debounce(func, wait, immediate) {\n    var timeout\n    return function() {\n      var context = this, args = arguments\n      var later = function () {\n        timeout = null\n        if (!immediate) func.apply(context, args);\n      }\n      var callNow = immediate && !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n      if (callNow) func.apply(context, args);\n    }\n  },\n\n  throttle(func, wait, options) {\n    // From Underscore.js\n    // https://underscorejs.org\n    // (c) 2009-2022 Jeremy Ashkenas, Julian Gonggrijp, and DocumentCloud and\n    // Investigative Reporters & Editors\n    // Underscore may be freely distributed under the MIT license.\n    // --\n    // Returns a function, that, when invoked, will only be triggered at most once\n    // during a given window of time. Normally, the throttled function will run\n    // as much as it can, without ever going more than once per `wait` duration;\n    // but if you'd like to disable the execution on the leading edge, pass\n    // `{leading: false}`. To disable execution on the trailing edge, ditto.\n    var timeout, context, args, result;\n    var previous = 0;\n    if (!options) options = {};\n\n    var later = function() {\n      previous = options.leading === false ? 0 : Date.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n\n    var throttled = function() {\n      var _now = Date.now();\n      if (!previous && options.leading === false) previous = _now;\n      var remaining = wait - (_now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = _now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n\n    throttled.cancel = function() {\n      clearTimeout(timeout);\n      previous = 0;\n      timeout = context = args = null;\n    };\n\n    return throttled;\n  }\n\n}\n\nexport default Tetra;\n", "import Tetra from './tetra.core'\n\nwindow.Tetra = Tetra;\nwindow.document.addEventListener('alpine:init', () => {\n  Tetra.init();\n})\n"],
  "mappings": "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",
  "names": ["components"]
}
